<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yaro adminUI - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- AUTH SCREEN -->
    <div id="authScreen" class="auth-screen">
      <div class="auth-container">
        <div class="auth-header">
          <h1>üîê YaroAdminUI</h1>
          <p>–í—Ö–æ–¥ —á–µ—Ä–µ–∑ SSH-–∫–ª—é—á –∏–ª–∏ WebAuthn</p>
        </div>

        <div class="auth-tabs">
          <button class="auth-tab active" data-tab="ssh-auth">SSH –ö–ª—é—á</button>
          <button class="auth-tab" data-tab="webauthn-auth">WebAuthn</button>
          <button class="auth-tab" data-tab="telegram-auth">Telegram</button>
        </div>

        <!-- SSH Auth Tab -->
        <div id="ssh-auth" class="auth-tab-content active">
          <form id="sshAuthForm" class="auth-form">
            <div class="form-group">
              <label for="sshMessage">SSH –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏:</label>
              <textarea
                id="sshMessage"
                class="form-control"
                readonly
              ></textarea>
              <button
                type="button"
                id="generateMessageBtn"
                class="btn btn-primary btn-sm"
              >
                –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
              </button>
            </div>

            <div class="form-group">
              <label for="sshSignature">–ü–æ–¥–ø–∏—Å—å (base64):</label>
              <textarea
                id="sshSignature"
                class="form-control"
                placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–¥–ø–∏—Å—å –æ—Ç ssh-keygen -Y sign"
              ></textarea>
            </div>

            <button type="submit" class="btn btn-success btn-block">
              –í—Ö–æ–¥ —á–µ—Ä–µ–∑ SSH
            </button>
          </form>
        </div>

        <!-- WebAuthn Auth Tab -->
        <div id="webauthn-auth" class="auth-tab-content">
          <form id="webauthnAuthForm" class="auth-form">
            <div class="form-group">
              <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
              <input
                type="text"
                id="username"
                class="form-control"
                placeholder="admin"
              />
            </div>

            <button
              type="button"
              id="webauthnRegisterBtn"
              class="btn btn-secondary btn-block"
            >
              –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
            </button>
            <button type="submit" class="btn btn-success btn-block">
              –í—Ö–æ–¥ WebAuthn
            </button>
          </form>
        </div>

        <!-- Telegram Auth Tab -->
        <div id="telegram-auth" class="auth-tab-content">
          <div class="telegram-auth-info">
            <p>üì± –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É –≤ Telegram:</p>
            <code>/auth_code {YOUR_CODE}</code>
            <div class="form-group">
              <input
                type="text"
                id="telegramCode"
                class="form-control"
                placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram"
              />
            </div>
            <button
              type="button"
              id="telegramAuthBtn"
              class="btn btn-success btn-block"
            >
              –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∫–æ–¥
            </button>
          </div>
        </div>

        <div
          id="authError"
          class="alert alert-danger"
          style="display: none"
        ></div>
      </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div id="dashboard" class="dashboard" style="display: none">
      <!-- HEADER -->
      <div class="header">
        <div class="header-content">
          <h1>üìã YaroAdminUI</h1>
          <p id="userInfo">–í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <span id="username">Admin</span></p>
        </div>
        <div class="header-controls">
          <div class="theme-dropdown">
            <button
              id="themeToggle"
              class="btn btn-primary"
              title="–í—ã–±—Ä–∞—Ç—å —Ç–µ–º—É"
            >
              üé® –¢–µ–º–∞
            </button>
            <div id="themeMenu" class="theme-menu" style="display: none">
              <button
                class="theme-option"
                id="themeDefault"
                data-theme="default"
              >
                Default
              </button>
              <button
                class="theme-option"
                id="themeHackerGreen"
                data-theme="hacker-green"
              >
                üü¢ Hacker Green
              </button>
              <button
                class="theme-option"
                id="themeSolarized"
                data-theme="solarized"
              >
                ‚òÄÔ∏è Solarized
              </button>
              <button class="theme-option" id="themeMatrix" data-theme="matrix">
                üü¢ Matrix
              </button>
              <button
                class="theme-option"
                id="themeCyberpunk"
                data-theme="cyberpunk"
              >
                üíú Cyberpunk
              </button>
            </div>
          </div>
          <div class="notifications-dropdown">
            <button
              id="notificationsToggle"
              class="btn btn-info"
              title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
            >
              üîî
              <span
                id="notificationsCount"
                class="notification-badge"
                style="display: none"
                >0</span
              >
            </button>
            <div
              id="notificationsMenu"
              class="notifications-menu"
              style="display: none"
            >
              <div id="notificationsList" class="notifications-list-header">
                <p class="text-muted">–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>
              </div>
            </div>
          </div>
          <div class="system-dropdown">
            <button
              id="systemToggle"
              class="btn btn-warning"
              title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π"
            >
              ‚öôÔ∏è
            </button>
            <div id="systemMenu" class="system-menu" style="display: none">
              <button class="system-option" data-action="restart-ssh">
                üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å SSH
              </button>
              <button class="system-option" data-action="check-disk">
                üíæ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏—Å–∫
              </button>
              <button class="system-option" data-action="restart-service">
                üîÑ –†–µ—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞
              </button>
            </div>
          </div>
          <button id="logoutBtn" class="btn btn-danger">–í—ã—Ö–æ–¥</button>
        </div>
      </div>

      <!-- CONTAINER WITH CARDS -->
      <div class="container" id="cardsContainer">
        <!-- SERVER STATUS CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üñ•Ô∏è –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞</h2>
          </div>
          <div class="card-body">
            <div class="status-item">
              <span>IP –∞–¥—Ä–µ—Å:</span>
              <strong id="serverIP">-</strong>
            </div>
            <div class="status-item">
              <span>–°—Ç–∞—Ç—É—Å:</span>
              <strong id="serverStatus" class="status-online">üü¢ Online</strong>
            </div>
            <div class="status-item">
              <span>–í—Ä–µ–º—è –∂–∏–∑–Ω–∏:</span>
              <strong id="serverUptime">-</strong>
            </div>
            <div class="status-item">
              <span>CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</span>
              <strong id="cpuUsage">-</strong>
            </div>
            <div class="status-item">
              <span>RAM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</span>
              <strong id="ramUsage">-</strong>
            </div>
          </div>
        </div>

        <!-- SCREEN PROCESSES CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üì∫ Screen —Å–µ—Å—Å–∏–∏</h2>
            <button
              id="screenRefreshBtn"
              class="btn btn-sm btn-info"
              style="margin-left: auto"
            >
              üîÑ –û–±–Ω–æ–≤–∏—Ç—å
            </button>
          </div>
          <div class="card-body">
            <div
              id="screenProcessesList"
              style="display: flex; flex-direction: column; gap: 8px"
            >
              <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
          </div>
        </div>

        <!-- SERVICES AND PM2 CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üöÄ –°–µ—Ä–≤–∏—Å—ã</h2>
          </div>
          <div class="card-body">
            <h4>Systemctl —Å–µ—Ä–≤–∏—Å—ã:</h4>
            <div id="systemctlList" class="services-list">
              <p class="text-muted">–ó–∞–≥—Ä—É–∂–∞–µ–º —Å–µ—Ä–≤–∏—Å—ã...</p>
            </div>

            <hr style="margin: 20px 0" />

            <h4>PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã:</h4>
            <div id="pm2List" class="services-list">
              <p class="text-muted">–ù–µ—Ç PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–ª–∏ PM2 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</p>
            </div>
          </div>
        </div>

        <!-- SCRIPTS CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üìú –°–∫—Ä–∏–ø—Ç—ã</h2>
          </div>
          <div class="card-body">
            <div id="scriptsList" class="scripts-list">
              <p class="text-muted">–ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã...</p>
            </div>
            <div
              id="scriptsInfo"
              class="text-muted"
              style="margin-top: 15px; font-size: 0.9em"
            >
              –°–∫—Ä–∏–ø—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–∞–Ω–µ–ª–∏.
            </div>
          </div>
        </div>

        <!-- PORTS CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üîå –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã</h2>
            <button
              id="refreshPorts"
              class="btn btn-small"
              title="–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Ä—Ç–æ–≤"
            >
              üîÑ
            </button>
          </div>
          <div class="card-body">
            <div
              id="portsList"
              class="ports-list"
              style="max-height: 100%; overflow-y: auto"
            >
              <p class="text-muted">–ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Ä—Ç—ã...</p>
            </div>
          </div>
        </div>

        <!-- PROCESSES CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>‚öôÔ∏è –ü—Ä–æ—Ü–µ—Å—Å—ã (Top 30)</h2>
            <button
              id="refreshProcesses"
              class="btn btn-small"
              style="margin-left: auto"
            >
              üîÑ –û–±–Ω–æ–≤–∏—Ç—å
            </button>
          </div>
          <div class="card-body">
            <div
              id="processesList"
              class="processes-list"
              style="max-height: 500px; overflow-y: auto"
            >
              <p class="text-muted">–ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã...</p>
            </div>
          </div>
        </div>

        <!-- LOGS CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üìù –õ–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
          </div>
          <div class="card-body">
            <div
              id="logsList"
              class="logs-list"
              style="max-height: 300px; overflow-y: auto"
            >
              <p class="text-muted">–ù–µ—Ç –ª–æ–≥–æ–≤</p>
            </div>
          </div>
        </div>

        <!-- SSH KEY MANAGEMENT CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üîë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSH –∫–ª—é—á–∞–º–∏</h2>
          </div>
          <div class="card-body">
            <form id="sshKeyForm" class="form">
              <div class="form-group">
                <label for="newSshKey">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á:</label>
                <textarea
                  id="newSshKey"
                  class="form-control"
                  placeholder="ssh-ed25519 AAAA..."
                ></textarea>
              </div>
              <button type="submit" class="btn btn-success">
                –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á
              </button>
            </form>
            <hr />
            <h4>–¢–µ–∫—É—â–∏–µ –∫–ª—é—á–∏:</h4>
            <div id="keysList" class="keys-list">
              <p class="text-muted">–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–ª—é—á–∏...</p>
            </div>
          </div>
        </div>

        <!-- FIREWALL CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üî• Firewall</h2>
          </div>
          <div class="card-body">
            <form id="firewallForm" class="form">
              <div class="form-group">
                <label for="fwPort">–ü–æ—Ä—Ç:</label>
                <input
                  type="number"
                  id="fwPort"
                  class="form-control"
                  placeholder="22"
                  min="1"
                  max="65535"
                />
              </div>
              <div class="form-group">
                <label for="fwAction">–î–µ–π—Å—Ç–≤–∏–µ:</label>
                <select id="fwAction" class="form-control">
                  <option value="allow">–†–∞–∑—Ä–µ—à–∏—Ç—å</option>
                  <option value="deny">–ó–∞–ø—Ä–µ—Ç–∏—Ç—å</option>
                </select>
              </div>
              <button type="submit" class="btn btn-warning">
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ
              </button>
            </form>
          </div>
        </div>

        <!-- TERMINAL CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üíª –¢–µ—Ä–º–∏–Ω–∞–ª</h2>
          </div>
          <div class="card-body">
            <div
              style="
                display: flex;
                flex-direction: column;
                height: 100%;
                gap: 10px;
              "
            >
              <div
                class="terminal-output"
                id="terminalOutput"
                style="
                  flex: 1;
                  background: #1e1e1e;
                  color: #d4d4d4;
                  padding: 10px;
                  border-radius: 4px;
                  overflow-y: auto;
                  font-family: 'Courier New', monospace;
                  font-size: 12px;
                  border: 1px solid #333;
                "
              >
                <p style="margin: 0; color: #888">
                  $ –ì–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∫–æ–º–∞–Ω–¥
                </p>
              </div>
              <div style="display: flex; gap: 8px">
                <input
                  type="text"
                  id="terminalInput"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: sudo systemctl status nginx)..."
                  style="
                    flex: 1;
                    padding: 8px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                    font-family: 'Courier New', monospace;
                    font-size: 12px;
                  "
                />
                <button
                  id="terminalExecBtn"
                  class="btn btn-primary"
                  style="white-space: nowrap"
                >
                  –í—ã–ø–æ–ª–Ω–∏—Ç—å
                </button>
              </div>
              <div
                id="terminalError"
                style="color: #d32f2f; font-size: 12px; display: none"
              ></div>
            </div>
          </div>
        </div>

        <!-- VPN CONFIGURATION CARD -->
        <div class="card" draggable="true">
          <div class="card-header">
            <h2>üîê VPN –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h2>
          </div>
          <div class="card-body">
            <div style="display: flex; flex-direction: column; gap: 15px">
              <!-- VPN Type Selection -->
              <div class="vpn-config-section">
                <h3>üìã –¢–∏–ø VPN</h3>
                <div class="vpn-config-form">
                  <select id="vpnType" style="width: 100%">
                    <option value="wireguard">WireGuard</option>
                    <option value="openvpn">OpenVPN</option>
                    <option value="xray">Xray</option>
                  </select>
                </div>
              </div>

              <!-- WireGuard Config -->
              <div class="vpn-config-section" id="wireguardConfig">
                <h3>üõ°Ô∏è WireGuard</h3>
                <div class="vpn-config-form">
                  <label>–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á:</label>
                  <textarea
                    id="wgPrivateKey"
                    placeholder="–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á..."
                    rows="3"
                    style="
                      font-family: 'Courier New', monospace;
                      font-size: 0.85em;
                    "
                  ></textarea>
                  <label>IP –∞–¥—Ä–µ—Å:</label>
                  <input type="text" id="wgAddress" placeholder="10.0.0.2/32" />
                  <label>DNS —Å–µ—Ä–≤–µ—Ä—ã:</label>
                  <input
                    type="text"
                    id="wgDNS"
                    placeholder="8.8.8.8, 8.8.4.4"
                  />
                  <button class="btn btn-primary" id="wgConnectBtn">
                    –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
                  </button>
                </div>
              </div>

              <!-- OpenVPN Config -->
              <div
                class="vpn-config-section"
                id="openvpnConfig"
                style="display: none"
              >
                <h3>üîì OpenVPN</h3>
                <div class="vpn-config-form">
                  <label>–ö–æ–Ω—Ñ–∏–≥ —Ñ–∞–π–ª (.ovpn):</label>
                  <textarea
                    id="ovpnConfig"
                    placeholder="–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ .ovpn —Ñ–∞–π–ª–∞..."
                    rows="5"
                    style="
                      font-family: 'Courier New', monospace;
                      font-size: 0.85em;
                    "
                  ></textarea>
                  <button class="btn btn-primary" id="ovpnConnectBtn">
                    –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
                  </button>
                </div>
              </div>

              <!-- Xray Config -->
              <div
                class="vpn-config-section"
                id="xrayConfig"
                style="display: none"
              >
                <h3>‚ö° Xray</h3>
                <div class="vpn-config-form">
                  <label>UUID:</label>
                  <input
                    type="text"
                    id="xrayUUID"
                    placeholder="00000000-0000-0000-0000-000000000000"
                  />
                  <label>–°–µ—Ä–≤–µ—Ä –∞–¥—Ä–µ—Å:</label>
                  <input
                    type="text"
                    id="xrayServer"
                    placeholder="example.com"
                  />
                  <label>–ü–æ—Ä—Ç:</label>
                  <input type="number" id="xrayPort" placeholder="443" />
                  <label>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:</label>
                  <select id="xrayEncryption">
                    <option value="auto">auto</option>
                    <option value="aes-128-gcm">aes-128-gcm</option>
                    <option value="chacha20-poly1305">chacha20-poly1305</option>
                  </select>
                  <button class="btn btn-primary" id="xrayConnectBtn">
                    –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
                  </button>
                </div>
              </div>

              <!-- VPN Status -->
              <div
                style="
                  padding: 12px;
                  background: rgba(0, 0, 0, 0.2);
                  border-radius: 6px;
                "
              >
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span style="color: #b0b0b0">–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</span>
                  <span class="vpn-status inactive" id="vpnStatus"
                    >‚ùå –û—Ç–∫–ª—é—á–µ–Ω–æ</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- TOAST NOTIFICATIONS -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="config.js"></script>
    <script src="adminui_client.js"></script>
  </body>
</html>
